(window.webpackJsonp=window.webpackJsonp||[]).push([[234],{538:function(e,a,s){"use strict";s.r(a);var n=s(11),t=Object(n.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"previous-value-❇️"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#previous-value-❇️"}},[e._v("#")]),e._v(" previous_value ❇️")]),e._v(" "),a("p",[e._v("La función "),a("code",[e._v("previous_value")]),e._v(" es una función de ventana que devuelve el valor del anterior registro del rango.")]),e._v(" "),a("p",[e._v("Requiere la cláusula "),a("code",[e._v("ORDER BY")]),e._v(" en la partición "),a("code",[e._v("OVER")]),e._v(".")]),e._v(" "),a("p",[e._v("Se puede usar tanto la sintaxis "),a("code",[e._v("OVER")]),e._v(" del SQL estándar como la sintaxis compacta propia de Crono.")]),e._v(" "),a("h2",{attrs:{id:"ejemplo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ejemplo"}},[e._v("#")]),e._v(" Ejemplo")]),e._v(" "),a("p",[e._v("La siguiente consulta devuelve las ventas de cada mes y las ventas en el mes sigu"),a("strong",[e._v("anterior")]),e._v(".")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("select \n  year(fecha) anyo, \n  month(fecha) mes,\n  sum(unidades) ventas,\n  previous_value(ventas) over (order by anyo,mes) nextValue,\nfrom dbo.lb_ventas\ngroup by all\n")])])]),a("p",[e._v("La misma consulta se puede construir con la sintaxis compacta del "),a("code",[e._v("OVER")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("select \n  year(fecha) anyo, \n  month(fecha) mes,\n  sum(unidades) ventas,\n  previous_value(ventas order by anyo,mes) nextValue,\nfrom dbo.lb_ventas\ngroup by all\n")])])]),a("p",[e._v("La consulta SQL generada en ambos casos es:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("SELECT\n  year(fecha) AS anyo,\n  month(fecha) AS mes,\n  sum(unidades) AS ventas,\n  max(sum(unidades)) OVER (ORDER BY year(fecha),month(fecha) ROWS BETWEEN 1 PRECEDING AND 1 PRECEDING) AS nextValue\nFROM dbo.lb_ventas\nGROUP BY\n  year(fecha),\n  month(fecha)\n")])])]),a("h2",{attrs:{id:"comentarios"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#comentarios"}},[e._v("#")]),e._v(" Comentarios")]),e._v(" "),a("p",[e._v("La función "),a("code",[e._v("next_value")]),e._v(" devuelve el valor del registro previo.")])])}),[],!1,null,null,null);a.default=t.exports}}]);